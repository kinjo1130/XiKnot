---
import Layout from '../../layouts/Layout.astro';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
  const news = await getCollection('news');
  return news.map((article) => ({
    params: { slug: article.id },
    props: { article },
  }));
}

const { article } = Astro.props;
const { Content } = await render(article);

const formattedDate = article.data.date.toLocaleDateString('ja-JP', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<Layout title={article.data.title} description={article.data.description}>
  <!-- Hero Section -->
  <section class="relative pt-32 pb-12 bg-bg-offwhite">
    <div class="max-w-4xl mx-auto px-6">
      <a
        href="/news"
        class="inline-flex items-center gap-2 text-gray-500 hover:text-gray-900 transition-colors mb-8 group"
      >
        <svg class="w-4 h-4 group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        <span>ニュース一覧</span>
      </a>

      <time class="text-gray-500 font-medium text-sm">{formattedDate}</time>
      <h1 class="text-4xl md:text-5xl font-bold mt-4 text-gray-900 leading-tight">
        {article.data.title}
      </h1>
    </div>
  </section>

  <!-- Content Section -->
  <section class="py-16 relative bg-white">
    <div class="max-w-4xl mx-auto px-6">
      <article class="prose-dark max-w-none">
        <Content />
      </article>

      <!-- Back to news -->
      <div class="mt-16 pt-12 border-t border-gray-200">
        <a
          href="/news"
          class="inline-flex items-center gap-3 px-6 py-3 rounded-full bg-gray-50 border border-gray-200 text-gray-600 hover:text-gray-900 hover:border-gray-900 transition-all group"
        >
          <svg class="w-4 h-4 group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
          <span>ニュース一覧に戻る</span>
        </a>
      </div>
    </div>
  </section>
</Layout>
